<!DOCTYPE HTML>
<html>
<head>
    <title>Store</title>
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='store_style.css') }}">

    <!-- Initate the payment websocket -->

    <script src="{{ url_for('static', filename='store.js') }}"></script>
    <script type="text/javascript">
        var items = {{ params | tojson }};
        console.log(items);
    </script>

</head>


<body>
    <div id="paybox">
        <div id="row" height="50px">
            <div id="left" style="display:inline-block;" height="75px">
                <h1 style="margin-bottom:0px;">Checkout</h1>
                </br><p style="padding:0;">BTCUSD: $<b><span id="BTCPrice"></span></b></p>
            </div>
            <div id="right">
                <!-- <a id="logo" style="display:none" target="_blank"><img width="65px" src="https://i.pinimg.com/originals/3a/dd/40/3add4023fa9b435e7da3c09156b88015.png"></a> -->
                <!-- Logo class gets changed to qr via js -->
                <a id="qrClick" target="_blank"><img class="logo" id="qrImage" width="65px" src="https://i.pinimg.com/originals/3a/dd/40/3add4023fa9b435e7da3c09156b88015.png"></a>
            </div>
        </div>

        </br>
        <form  action='/pay'>
            </br>
            <div id="storetable">
            </div>
            <input style="display:none" size="4" type="float" name="amount" id="amount" placeholder="USD" required></input>
            </br>
            <input type="text" id="search" style="float:left; border-radius:5px;" placeholder="Search Items"></input>
            <input class="button button1" onclick="clearQuantities()" style="float:left; color:black; background-color:orange;" value="Clear"></input>&nbsp&nbsp<input class="button button1" style="float:left;" type="submit" value="Pay"></input>
        </form>
        </br>
        <div style="margin-top:100px; wordwrap:break-word; display:inline">
            <p></p>
            <p style="display:inline">Total: $<b><span id="invoicetotal"></span></b></p>
            <p style="display:inline;padding:0;">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp <b><span id="sats_amount"></span></b> sats</p>
            <p style="display:inline;padding:0;">&nbsp(<b><span id="btc_amount"></span></b> BTC)</p>
        </div>

    </div>
    <script type="text/javascript">
        main(items)


        $("#search").on("keyup", function() {
            var value = $(this).val().toLowerCase();

            $("table tr").each(function(index) {
                if (index !== 0) {
                    $row = $(this);

                    var $tdElement = $row.find("td:first");
                    var id = $tdElement.text().toLowerCase();
                    var matchedIndex = id.indexOf(value);

                    if (matchedIndex == -1) {
                        $row.hide();
                    }
                    else {
                        $row.show();
                    }
                }
            });
        });

    </script>
</body>
</html>
